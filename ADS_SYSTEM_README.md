# نظام الإعلانات - مانجافاس

## الوصف
تم إضافة نظام إعلانات شامل يسمح للأدمن بإدارة الإعلانات والروابط، بينما يمكن للمستخدمين مشاهدتها والحصول على مكافآت.

## الميزات المضافة

### 1. صفحة مشاهدة الإعلانات (`/ads`)
- عرض جميع الإعلانات النشطة
- نظام العد التنازلي للإعلانات التي تتطلب انتظار
- مكافآت نقطية للمستخدمين
- واجهة جذابة وسهلة الاستخدام
- عداد المشاهدات لكل إعلان

### 2. لوحة إدارة الإعلانات (أدمن فقط)
- إضافة إعلانات جديدة
- تعديل الإعلانات الموجودة
- تفعيل/إيقاف الإعلانات
- حذف الإعلانات
- مراقبة إحصائيات المشاهدات

### 3. خصائص الإعلان
- **العنوان**: عنوان الإعلان
- **الوصف**: وصف مفصل للإعلان
- **الرابط**: الرابط المراد توجيه المستخدمين إليه
- **الصورة**: صورة اختيارية للإعلان
- **نقاط المكافأة**: نقاط يحصل عليها المستخدم عند المشاهدة
- **مدة الانتظار**: الوقت المطلوب انتظاره قبل زيارة الرابط (بالثانية)
- **حالة النشاط**: تفعيل/إيقاف الإعلان
- **عداد النقرات**: عدد مرات مشاهدة الإعلان

## الملفات المضافة

### الواجهات والصفحات
- `src/pages/Ads.tsx` - صفحة مشاهدة الإعلانات
- `src/components/admin/AdsManagement.tsx` - لوحة إدارة الإعلانات

### قاعدة البيانات
- `supabase/migrations/create_ads_table.sql` - جدول الإعلانات مع الصلاحيات
- تحديث `src/integrations/supabase/types.ts` - إضافة أنواع TypeScript

### التحديثات على الملفات الموجودة
- `src/components/Header.tsx` - إضافة رابط "مشاهدة إعلان"
- `src/components/AdminDashboard.tsx` - إضافة تاب إدارة الإعلانات
- `src/App.tsx` - إضاف�� المسار الجديد

## البنية التقنية

### قاعدة البيانات
```sql
CREATE TABLE public.ads (
    id UUID PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    description TEXT,
    url TEXT NOT NULL,
    image_url TEXT,
    reward_points INTEGER DEFAULT 0,
    duration_seconds INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT true,
    click_count INTEGER DEFAULT 0,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

### الصلاحيات
- **الأدمن**: يمكنهم إنشاء، تعديل، وحذف الإعلانات
- **المستخدمون**: يمكنهم عرض الإعلانات النشطة وتحديث عداد النقرات
- **الضيوف**: يمكنهم عرض الإعلانات النشطة

### الأمان
- Row Level Security (RLS) مفعل على جدول الإعلانات
- التحقق من صلاحيات الأدمن قبل السماح بالتعديل
- حماية من التلاعب في عداد النقرات

## كيفية الاستخدام

### للأدمن
1. الدخول إلى لوحة الإدارة (`/admin`)
2. اختيار تاب "إدارة الإعلانات"
3. النقر على "إضافة إعلان جديد"
4. ملء البيانات المطلوبة
5. حفظ الإعلان

### للمستخدمين
1. النقر على "مشاهدة إعلان" في القائمة العلوية
2. اختيار الإعلان المرغوب
3. انتظار العد التنازلي (إن وجد)
4. النقر على "زيارة الرابط" للحصول على المكافأة

## المكافآت
- يمكن تحديد عدد النقاط التي يحصل عليها المستخدم
- يتم عرض رسالة تأكيد عند حصول المستخدم على النقاط
- النقاط قابلة للاستخدام في ميزات مستقبلية

## التطوير المستقبلي
- ربط النقاط بنظام المستخدمين
- إضافة إحصائيات مفصلة
- نظام استهداف الإعلانات
- تكامل مع منصات الإعلانات الخارجية
